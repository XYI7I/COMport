<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.5">
        <title>Laser YLP[X]-Series Software</title>
        <link rel="icon" href="img/icon.png" type="image/x-icon">
        <meta name="Description" content="Laser YLP[X]-Series COM-port Control System">
        <link rel="stylesheet" href="style.css">
        <script src="main.js"></script>
        <script src="laser.js"></script>
        <script src="password.js"></script>
    </head>
    <body>
        <a id ="manual"><button id ="manualButton" class="active" style="width: 21px; color: #008700" title="руководство пользователя">&#128366;</button></a>
        <button id="settingsButton" class="active" onclick="showPasswordModal()" style="width: 21px; color: #7d8300" title="экспертные настройки">&#9888;</button>
<!--        &#128712;-->
        <!-- Кнопка-переключатель с индикатором -->
        <div class="switch" onclick="toggleConnection()">
            <button id="connectButton" title="выбор COM-port">&nbsp- COM -&nbsp</button>
            <div id="connectionLed" class="led_com" title="индикатор подключения"></div>
        </div>
        <div style="font-size: 7px; color: #008700">модель:<span id="model" style="color: #02fd02">-</span>&nbspS/N:<span id="sn">-</span></div>
        <span id="connectionDB25" style="font-size: 7px; font-weight: bold; text-align: center;vertical-align: center; color: yellow"></span><br>
        <div class="switch" onclick="toggleRS232()">
            управление лазером&nbsp<button id="connectRS232" class="status-off" style="width: 73px" title="переключатель интерфейсов - RS-232/DB-25">&#128435;</button>
<!--            &#128377; when DB-25 connected-->
            <div id="connectionRS232Led" class="led_RS232" style="font-size: 7px; font-weight: bold; text-align: center;vertical-align: center; color: black" title="индикатор подключения к лазеру по RS-232">RS-232</div>
<!--            <div><span id="RS232"></span></div>-->
        </div>
        <br>
        <div class="switch" onclick="toggleGaideLaser()">
            лазер пилот&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
<!--            &#9728; -->
            <button id="guideLaser" class="status-off" style="width: 73px" title="выключатель лазер-пилота">&#9211;</button>
            <div id="guideLaserLed" class="led_laser" title="индикатор лазер-пилота"></div>
        </div>
        <br>
        <div class="switch" onclick="toggleMainLaser()">
            лазер основной&nbsp&nbsp&nbsp&nbsp&nbsp
            <button id="mainLaser" class="status-off" style="width: 73px" title="выключатель излучения лазера">&#9211;</button>
            <div id="mainLaserLed" class="led_laser" title="индикатор излучения лазера"></div>
        </div>
        <br><br><br>
        <div class="led-panel">
            <label for="powerSlider"></label>
            <div id="led8" class="led" title="предупреждение о высокой температуре">&#127777;</div>
            <div id="led9" class="led" title="предупреждение о неисправности в источнике питания">U</div>
            <div id="led10" class="led" title="предупреждение об отражении">B</div>
            <div id="led11" class="led" title="предупреждение о системной ошибке">E</div>
            <div id="led12" class="led_ready" title="готовность">R</div>
        </div>
        <br>
        <div id="controlDB25" style="display: none;">
            <label>DB25 мощность:</label>&nbsp<span id="DB25PowerStr">--</span>&nbsp%;&nbspчастота:&nbsp<span id="DB25FreqStr">--</span>&nbspKHz
            <br>
            <br>
            <div class="led-panel">
                <div id="led0" class="ledDB25">0</div>
                <div id="led1" class="ledDB25">1</div>
                <div id="led2" class="ledDB25">2</div>
                <div id="led3" class="ledDB25">3</div>
                <div id="led4" class="ledDB25">4</div>
                <div id="led5" class="ledDB25">5</div>
                <div id="led6" class="ledDB25">6</div>
                <div id="led7" class="ledDB25">7</div>
            </div>
        </div>
        <!-- Модальное окно для ввода пароля -->
        <div id="passwordModal" style="display: none;">
            <div style="background-color: white; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 20px; border: 1px solid #ccc; text-align: center; max-width: 300px; margin: auto;">
                <span><b style="color: red; background-color: yellow">Внимание Вы переходите в расширенный режим!!!<br> Убедитесь, что обеспечены все необходимые меры безопасности для работы с лазером!!!</b></span>
                <br><br><b style="background-color: white">Введите пароль:</b>
                <input type="password" id="passwordInput" placeholder="Пароль" style="padding: 5px; width: 80%;" onkeydown="if (event.key === 'Enter') checkPassword();" />
                <button onclick="checkPassword()" style="margin-top: 10px; padding: 5px;">Подтвердить</button>
                <button onclick="closePasswordModal()" style="margin-top: 10px; padding: 5px;">Отмена</button>
            </div>
        </div>
        <div id="advancedLaserMode" style="display: none;">
            <div class="adv-panel">
                 ЭКСПЕРТНЫЕ УСТАНОВКИ<button onclick="closeAdvancedLaserMode()" style="position: absolute; top: 10px; right: 10px;">&#9746;</button>
                <br><br>
                <label for="powerSlider">мощность импульса [%]:</label>
                <div class="slider-container">
                    <input type="range" id="powerSlider" class="slider" min="0" max="100" step="1" value="10" oninput="document.getElementById('powerValue').textContent = this.value"
                           onchange="updatePowValue(this.value)">
                    <span id="powerValue">10</span>%
                </div>
                <br>
                <label for="frequencySlider">частота PRR [KHz]:</label>
                <div class="slider-container">
                    <input type="range" id="frequencySlider" class="slider" min="50" max="1000" step="10" value="" oninput="document.getElementById('frequencyValue').textContent = this.value"
                           onchange="updateFreqValue(this.value)">
                    <span id="frequencyValue"></span>KHz
                </div>
                <br>
                <label id="pulse_duration_label" for="pulse_duration" style="display: inline-block;">длительность импульса, [ns]:</label>
                <input type="text" id="pulse_duration" list="pulse_durationList" style="width: 10ch;  display: inline-block;" value="-" onclick="this.value = ''"
                       onchange="setPulseDurationValue(this.value)">
                <datalist id="pulse_durationList">
                </datalist>
                <br><br>
                командная строка:
                <div style="width:360px"><hr color="green"></div>
                <input type="text" id="lineToSend" style="width:273px" onkeydown="if (event.key === 'Enter') sendSerialLine();">
                <button onclick="sendSerialLine()" style="width:73px">Send</button>
                <br>
                <div id="serialResults"></div>
                <br>
            </div>
        </div>
        <div class="footer-copyright">
            <div>
                <a href="https://github.com/XYI7I" target="_blank">GK</a>
                <a>7533</a>
            </div>
        </div>
    </body>
</html>
